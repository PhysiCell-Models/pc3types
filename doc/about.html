<h2 id="GUI_overview"><strong>GUI Overview</strong></h2>
<ul>
    <li><b>Config Basics</b> tab:&nbsp;&nbsp;&nbsp;  input parameters common to all models (e.g., domain grid, simulation time, choice/frequency of outputs)</li>
    <li><b>Microenvironment</b> tab:&nbsp;&nbsp; microenvironment parameters that are model-specific</li>
    <li><b>User Params</b> tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; user parameters that are model-specific</li>
    <li><b>Cell Types</b> tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; parameters for cell types that are model-specific</li>
    <li><b>Out: Plots</b> tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; output display of cells and substrates</li>
    <li><b>Animate</b> tab:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; generate an animation of cells</li>
</ul>
Clicking the 'Run' button will use the specified parameters and start a simulation. When clicked, it creates an "Output" widget
that can be clicked/expanded to reveal the progress (text) of the simulation. When the simulation generates output files,
they can be visualized in the "Out: Plots" tab. The "# cell frames" will be dynamically updated 
as those output files are generated by the running simulation. When the "Run" button is clicked, it toggles to a "Cancel" button
that will terminate (not pause) the simulation.

<h2><strong>The 3-Type Problem</strong></h2>

<p>Inspired by the 
<a href="https://en.wikipedia.org/wiki/Three-body_problem" target="_blank">3-body problem</a> in physics, 
this virtual cell laboratory explores a tunable multicellular system with 3 interacting cell types. Similarly  
to the 3-body problem, simple cell-cell interactions can lead to complex emergent 
dynamics, including cooperativity, competition, oscillations, and chaotic phenomena.</p>

<p>This virtual cell lab lets you broadly explore the effects of your assumptions of how cells affect 
    one another to drive the emergent multicelular dynamics.</p> 

<p>Each cell's behavior can be influenced by a combination of environmental signals: </p>
<ul>
<li style="margin-bottom:0.5em;"><strong>Resource (<i>R</i>):</strong> All cells consume a resource <i>R</i> that diffuses from the boundary. The 
    resource is necessary for cell proliferation and survival. (0 &le; <i>R</i> &le; 1) 
</li>

<li style="margin-bottom:0.5em;"><strong>Signal A (<i>&alpha;</i>):</strong> Type A cells 
    (<span style="height: 1em; width: 1em; background-color: magenta;     
display: inline-block; border-radius: 50%; border: 1px solid black; vertical-align: bottom"></span>) secrete 
this chemical factor, which can influence the behavior of any cell type. (0 &le; <i>&alpha;</i> &le; 1)
</li>

<li style="margin-bottom:0.5em;"><strong>Signal B (<i>&beta;</i>):</strong> Type B cells 
    (<span style="height: 1em; width: 1em; background-color: green;     
display: inline-block; border-radius: 50%; border: 1px solid black; vertical-align: bottom"></span>) secrete 
this chemical factor, which can influence the behavior of any cell type. (0 &le; <i>&beta;</i> &le; 1)
</li>


<li style="margin-bottom:0.5em;"><strong>Signal C (<i>&gamma;</i>):</strong> Type C cells 
    (<span style="height: 1em; width: 1em; background-color: cyan;     
display: inline-block; border-radius: 50%; border: 1px solid black; vertical-align: bottom"></span>) secrete 
this chemical factor, which can influence the behavior of any cell type. (0 &le; <i>&gamma;</i> &le; 1)
</li>

<li><strong>Pressure (<i>p</i>):</strong> When cells are pressed by other cells, it generates a 
    pressure that can affect proliferation and death. (0 &le; <i>p</i>. <i>p</i> &sim; 0.5 for a cell in uncompressed 
    confluent 2D tissue without further forces)
</li>

</ul>

<h3>Cell Types</h3>

<ul>
    <li><span style="height: 25px; width: 25px; background-color: magenta; margin-bottom: 0.5em;  
    display: inline-block; border-radius: 50%; border: 1px solid black; vertical-align: middle"></span> <strong>Type A</span></strong> cells secrete a 
    diffusing factor <i>&alpha;</i> that can influence the behavior of any other cell.</li>

    <li><span style="height: 25px; width: 25px; background-color: green; margin-bottom: 0.5em; 
        display: inline-block; border-radius: 50%; border: 1px solid black; vertical-align: middle"></span> <strong>Type B</strong> cells secrete a 
        diffusing factor <i>&beta;</i> that can influence the behavior of any other cell.</li>
    
        <li><span style="height: 25px; width: 25px; background-color: cyan;  
            display: inline-block; border-radius: 50%; border: 1px solid black; vertical-align: middle"></span> <strong>Type C</span></strong> cells secrete a 
            diffusing factor <i>&gamma;</i> that can influence the behavior of any other cell.</li>
    
    </ul>
<p>In the visualization, each live cell fluoresces proportionally to its expression (secretion) of its signal.</p>


<h3>Key cell behaviors</h3>
<p>Each cell can individually modulate several key behaviors, under the influence of <i>R</i>, <i>&alpha;</i>, 
    <i>&beta;</i>, <i>&gamma;</i>, and <i>p</i>. 
</p>

<h4>Proliferation</h4> 
<p>The cell division rate increases as <i>R</i> increases. The signals <i>&alpha;</i>, <i>&beta;</i>, and <i>&gamma;</i> 
can individually inhibit, promote, or be neutral towards division. High pressure can inhibit proliferation. (These are set in the <b>User Params</b> 
tab. The maximum cell division rate is set in the corresponding <b>Cell Types</b> tab. </p>
    
<h4>Apoptotic death</h4> 
<p>The signals <i>&alpha;</i>, <i>&beta;</i>,  <i>&gamma;</i>, and <i>R</i>
can individually inhibit, promote, or be neutral towards death. High pressure can promote apoptotic death. 
These are set in the <b>User Params</b> tab. The maximum cell apoptotic death rate is set in the corresponding <b>Cell Types</b> tab. </p>

<h4>Necrotic death</h4>
<p>Necrotic death can occur when the resource <i>R</i> falls below a threshold, increasing towards a maximum rate. The 
maximum necrotic death rate is set in the <b>Cell Types</b> tab, and the resource threshold is in the 
<b>User Params</b> tab. </p>

<h4>Secretion</h4> 
<p>Cells secrete their respective signaling factor.  The signals <i>&alpha;</i>, <i>&beta;</i>,  <i>&gamma;</i>, and <i>R</i>
can individually inhibit, promote, or be neutral towards this secretion. This is set in the <b>User Params</b> tab.</p>

<h4>Motility</h4>
<p>Cells can perform a biased random migration (with varying bias, speed, persistence time, and direction.  
(See the interactive tutorial at <a href="https://nanohub.org/tools/trmotility" target="_blank">trmotility</a>.) 
In this framework, cell motility can be purely Brownian (no migration bias direction), or biased up or down 
the gradient of <i>R</I>, <i>&alpha;</i>, <i>&beta;</i>, or <i>&gamma;</i>. The base motiltiy parameters 
are set in the <b>Cell Types</b> tab. </p>

<h4>Adhesion</h4>
<p>Cells adhere to one another based on the parameters in the <b>Cell Types</b> tab.</p>

<h4>Repulsion</h4>
<p>Cells resist deformation by imposing a ``repulsive'' force against other cells. Summing up 
    these forces gives the (dimensionless) pressure <i>p</i> Set parameters in the <b>Cell Types</b> tab.</p>

<h3>Inhibition and Promotion</h3> 
<p>
We track the balance of inhibition and promotion of each key behavior (a model parameter) as follows: 
</p>
<ul>
<li>The total promotion <i>U</i> (for up) is initially set to 0. </li>
<li>The total inhibition <i>D</i> (for down) is initially set to 0.</li> 
<li>If a signal <i>s</i> is a promoter, then it is added to <i>U</i>.</li>
<li>If a signal <i>s</i> is an inhibitor, then it is added to <i>D</i>.</li>
<li>If a signal <i>s</i> is a neutral, then there is no change to <i>U</i> or <i>D</i>.</li>
<li>After considering all signals, calculate a multiplier <i>M</i> for the parameter: <br>
    <br>    
    <i>M</i> = [ <i>U</i><sup>n</sup>/(<i>U</i><sup>n</sup> + <i>h</i><sup>n</sup>)  ]  &times; 
     [ 1-<i>D</i><sup>n</sup>/(<i>D</i><sup>n</sup> + <i>h</i><sup>n</sup>) ]  <br>
    <br>
where <i>n</i> is the Hill power (default: <i>n</i>=5) and <i>h</i> is the half-max value (default: <i>h</i>=0.1).
</p>
</li>
<li>Multiply the multiplier <i>M</i> by the corresponding parameters.</li>
</ul>
<p>For example, suppose the cell divides at a maximum rate <i>r</i><sub>max</sub>, that signal &alpha; is a promoter, 
    and signals &beta; and &gamma; are ihibitors. Then (with default parameters): <br>
<br>
<i>r</i><sub>division</sub> = <i>r</i><sub>max</sub>[ <i>&alpha;</i><sup>5</sup>/(<i>&alpha;</i><sup>5</sup>+0.1<sup>5</sup>)  ]  &times; 
     [ 1-(<i>&beta;+&gamma;</i>)<sup>5</sup>/( (<i>&beta;+&gamma;</i>)<sup>5</sup>+0.1<sup>5</sup> ) ] 
<br>
</p>
<p>Notice that any single promoter is sufficient for up-regulation, and adding more 
    promoters increases the effect. (Same for inhibitors.) When there are both 
    inhibitors and promoters, it is the balance that drives behavior.
</p>

<h2>Suggested explorations</h2>
<p><a href="https://docs.google.com/document/d/1b6BuPMipPQb18nEov_Yy32icOY7AkBxicfuVBgEReJQ/edit?usp=sharing" target="_blank"></a>Click here</a> for 
    an up-to-date list of interesting parameter sets and suggested model exploration.</p>

<h2>Share your results!</h2>
<p>If you see something interesting, please share the results! We'll help the community see what happen so all can learn!</p>

<p>Please use this webform for reporting:</p>

<p style="text-align: center;">
<a href="https://forms.gle/bCYF5m9Zqq7cawUV6" target="_blank">Report an interesting result!</a>
</p>

<h2>Sponsors and Funding</h2>

<p>This model and cloud-hosted demo are part of a course on computational multicellular systems biology created and taught by 
    Dr. Paul Macklin in the Department of Intelligent Systems Engineering at Indiana University. It is also part of the education 
    and outreach for the IU Engineered nanoBIO Node and the NCI-funded cancer systems biology grant U01CA232137. 
    The models are built using <a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005991" target="_blank">PhysiCell</a>: 
    a C++ framework for multicellular systems biology [1].</p>


<h2><a id="instructions" name="instructions">Basic instructions</a></h2>

<p>Modify parameters in the &quot;Config Basics&quot;, &quot;Microenvironment&quot;, or &quot;User Params&quot; tabs. Click the &quot;Run&quot; button once you are ready.</p>

<p>To view the output results, click the &quot;Out: Plots&quot; tab, and move the slider bar to advance through simulation frames. 
Note that as the simulation runs, the &quot;# cell frames&quot; field will increase, so you can view more simulation frames.</p>

<p>If there are multiple substrates defined in the Microenvironment, you can select a different one from the drop-down widget in the Plots tab. You can also fix the colormap range of values.</p>

<p>Note that you can download full simulation data for further exploration in your tools of choice. And you can also generate an animation of the cells to play in the browser and, optionally, download as a video.</p>



<h3><strong>About the software: </strong></h3> 
<p>
This model and cloud-hosted demo are part of the education and outreach 
    for the IU Engineered nanoBIO Node (NSF 1720625), an NSF synthetic biology grant (NSF 1818187), 
    and the NCI-funded cancer systems biology grant U01CA232137. 
    The models are built using PhysiCell: a C++ framework for multicellular systems biology [1] 
    for the core simulation engine and xml2jupyter [2] to create the graphical user interface (GUI).</p>

<ol>
<li>
<a href="https://journals.plos.org/ploscompbiol/article?id=10.1371/journal.pcbi.1005991">A. Ghaffarizadeh, R. Heiland, S.H. Friedman, S.M. Mumenthaler, and P. Macklin. PhysiCell: an open source physics-based cell simulator for 3-D multicellular systems. PLoS Comput. Biol. 14(2):e1005991, 2018. DOI: 10.1371/journal.pcbi.1005991.</a> </li>
<li>
<a href="https://joss.theoj.org/papers/10.21105/joss.01408">R. Heiland, D. Mishler, T. Zhang, E. Bower, and P. Macklin. xml2jupyter: Mapping parameters between XML and Jupyter widgets. Journal of Open Source Software 4(39):1408, 2019. DOI: 10.21105/joss.01408.
</li>
</ol>
